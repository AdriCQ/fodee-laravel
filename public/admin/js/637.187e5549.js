"use strict";(self["webpackChunkfodee_admin"]=self["webpackChunkfodee_admin"]||[]).push([[637],{4637:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var o=n(3673),a=n(2323),l=n(1959),i=n(8825),u=n(1853),c=n(938),r=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{c(o.next(e))}catch(t){l(t)}}function u(e){try{c(o["throw"](e))}catch(t){l(t)}}function c(e){e.done?n(e.value):a(e.value).then(i,u)}c((o=o.apply(e,t||[])).next())}))};const m={class:"text-italic"},s={class:"float-left"},d={class:"text-subtitle2"},v=(0,o.aZ)({props:{comment:null},emits:["comment-removed","comment-updated"],setup(e,{emit:t}){const n=e,v=(0,c.Ey)(c.rG),f=(0,i.Z)(),{comment:p}=(0,l.BK)(n);function g(){f.dialog({title:"Eliminar Comentario",message:"EstÃ¡ seguro que desea eliminar el comentario?",ok:!0,cancel:!0}).onOk((()=>{u.j7.loading(),v.remove(Number(p.value.id)).then((()=>{t("comment-removed")})).catch((e=>{u.j7.axiosError(e,["Error eliminando comentario"])})).finally((()=>{u.j7.loading(!1)}))}))}function w(){return r(this,void 0,void 0,(function*(){u.j7.loading();try{p.value.visible=!p.value.visible,yield v.update(p.value),t("comment-updated",p.value)}catch(e){u.j7.axiosError(e,["Error Modificando comentario"])}u.j7.loading(!1)}))}return(e,t)=>{const n=(0,o.up)("q-card-section"),i=(0,o.up)("q-avatar"),u=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(u,{class:"text-grey-9"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,null,{default:(0,o.w5)((()=>[(0,o._)("p",m,'"'+(0,a.zw)((0,l.SU)(p).message)+'"',1)])),_:1}),(0,o.Wm)(n,{class:"text-right"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(i,{size:"sm",class:"cursor-pointer",color:""+((0,l.SU)(p).visible?"positive":"negative"),"text-color":"white",icon:""+((0,l.SU)(p).visible?"mdi-eye":"mdi-eye-off"),onClick:w},null,8,["color","icon"]),(0,o.Wm)(i,{class:"cursor-pointer",size:"sm",color:"negative","text-color":"white",icon:"mdi-delete",onClick:g})]),(0,o._)("div",d,(0,a.zw)((0,l.SU)(p).name),1)])),_:1})])),_:1})}}});var f=n(151),p=n(5589),g=n(5096),w=n(7518),y=n.n(w);const h=v,b=h;y()(v,"components",{QCard:f.Z,QCardSection:p.Z,QAvatar:g.Z});var x=n(8880),C=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{c(o.next(e))}catch(t){l(t)}}function u(e){try{c(o["throw"](e))}catch(t){l(t)}}function c(e){e.done?n(e.value):a(e.value).then(i,u)}c((o=o.apply(e,t||[])).next())}))};const q=(0,o.aZ)({emits:["create-comment"],setup(e,{emit:t}){const n=(0,c.Ey)(c.rG),a=(0,l.iH)({email:"",message:"",name:"",visible:!0});function i(){return C(this,void 0,void 0,(function*(){u.j7.loading();try{const e=yield n.create(a.value);t("create-comment",e.data),a.value={email:"",message:"",name:"",visible:!0}}catch(e){u.j7.axiosError(e,["No se pudo crear"])}u.j7.loading(!1)}))}return(e,t)=>{const n=(0,o.up)("q-input"),l=(0,o.up)("q-card-section"),u=(0,o.up)("q-btn"),c=(0,o.up)("q-card-actions"),r=(0,o.up)("q-form"),m=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(m,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{onSubmit:(0,x.iM)(i,["prevent"])},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{class:"q-gutter-y-sm"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{modelValue:a.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value.name=e),type:"text",label:"Nombre"},null,8,["modelValue"]),(0,o.Wm)(n,{modelValue:a.value.email,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value.email=e),type:"email",label:"Email"},null,8,["modelValue"]),(0,o.Wm)(n,{modelValue:a.value.message,"onUpdate:modelValue":t[2]||(t[2]=e=>a.value.message=e),type:"textarea",label:"Mensaje"},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{color:"primary",icon:"mdi-check",label:"Guardar",type:"submit"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})}}});var Z=n(5269),_=n(2426),W=n(9367),j=n(8240);const Q=q,E=Q;y()(q,"components",{QCard:f.Z,QForm:Z.Z,QCardSection:p.Z,QInput:_.Z,QCardActions:W.Z,QBtn:j.Z});var V=function(e,t,n,o){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,l){function i(e){try{c(o.next(e))}catch(t){l(t)}}function u(e){try{c(o["throw"](e))}catch(t){l(t)}}function c(e){e.done?n(e.value):a(e.value).then(i,u)}c((o=o.apply(e,t||[])).next())}))};const k=(0,o._)("div",{class:"text-h6"},"Comentarios",-1),S={class:"row q-col-gutter-sm"},U=(0,o.aZ)({setup(e){const t=(0,c.Ey)(c.rG),n=(0,l.iH)([]),a=(0,l.iH)(!1);function i(){return V(this,void 0,void 0,(function*(){u.j7.loading();try{const e=yield t.list();n.value=e.data}catch(e){u.j7.axiosError(e,["No se pudo cargar los comentarios"])}u.j7.loading(!1)}))}function r(e){n.value.unshift(e),a.value=!1}function m(e){n.value.splice(e,1)}function s(e){const t=n.value.findIndex((t=>t.id===e.id));n.value[t]=e}return i(),(e,t)=>{const l=(0,o.up)("q-btn"),i=(0,o.up)("q-card-section"),u=(0,o.up)("q-card"),c=(0,o.up)("q-dialog"),d=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(d,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"no-shadow-box text-grey-9"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"q-gutter-y-sm"},{default:(0,o.w5)((()=>[k,(0,o.Wm)(l,{color:"positive",icon:"mdi-plus",onClick:t[0]||(t[0]=e=>a.value=!0),label:"Nuevo Comentario"}),(0,o._)("div",S,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.value,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"col-sm-6 col-md-4 col-lg-3",key:`comment-${e.id}-${t}`},[(0,o.Wm)(b,{comment:e,onCommentRemoved:e=>m(t),onCommentUpdated:s},null,8,["comment","onCommentRemoved"])])))),128))])])),_:1})])),_:1}),(0,o.Wm)(c,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(E,{style:{"min-width":"25rem"},onCreateComment:r})])),_:1},8,["modelValue"])])),_:1})}}});var N=n(4379),z=n(7455);const G=U,H=G;y()(U,"components",{QPage:N.Z,QCard:f.Z,QCardSection:p.Z,QBtn:j.Z,QDialog:z.Z})}}]);